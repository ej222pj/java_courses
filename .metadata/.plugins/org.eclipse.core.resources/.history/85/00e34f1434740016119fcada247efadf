/**
 * @project_name 2DV600
 *
 * @package_name ej222pj_assign1
 * 
 * @file_name CountJava.java
 */
package ej222pj_assign1;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;

/**
 * @author Eric
 *
 * @date 6 sep 2016 : @time 13:48:44
 *
 */
public class CountJava {

	public static void main(String[] args) throws IOException{
		File folder = new File(args[0].toString());
		File[] listOfFiles = folder.listFiles();
		
		System.out.println("Root director: " + args[0].toString());

	    for (int i = 0; i < listOfFiles.length; i++) {
	      if (listOfFiles[i].isFile()) {
	    	  readFiles(args[0].toString(), listOfFiles[i].getName());
	      } 
	      else if (listOfFiles[i].isDirectory()) {
	    	  //System.out.println("Sub-director: " + args[0].toString() + "\\" + listOfFiles[i].getName());
	    	  //System.out.println(listOfFiles[i].getName());
	    	  String subDir = args[0].toString() + "\\" + listOfFiles[i].getName();

	    	  readFiles(subDir, );

	      }
	    }
	}
	
	public static void readFiles(String directoryPath, String filePath) throws IOException{
		System.out.println("hej" + directoryPath + " " + filePath);
		InputStream is = new BufferedInputStream(new FileInputStream(directoryPath + "\\" + filePath));
		int count = 1;
	    try {
	        byte[] c = new byte[1024];
	        
	        int readChars = 0;
	        while ((readChars = is.read(c)) != -1) {
	            for (int j = 0; j < readChars; ++j) {
	                if (c[j] == '\n') {
	                    ++count;
	                }
	            }
	        }
	    } finally {
	        is.close();
	    }  
	    System.out.println(filePath + " lines = " + count);
	}
}
